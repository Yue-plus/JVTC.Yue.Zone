"use strict";(self.webpackChunkjvtc_yue_zone=self.webpackChunkjvtc_yue_zone||[]).push([[4352],{3905:(t,e,n)=>{n.d(e,{Zo:()=>c,kt:()=>h});var a=n(67294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var p=a.createContext({}),s=function(t){var e=a.useContext(p),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},c=function(t){var e=s(t.components);return a.createElement(p.Provider,{value:e},t.children)},m="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(t,e){var n=t.components,o=t.mdxType,l=t.originalType,p=t.parentName,c=i(t,["components","mdxType","originalType","parentName"]),m=s(n),u=o,h=m["".concat(p,".").concat(u)]||m[u]||d[u]||l;return n?a.createElement(h,r(r({ref:e},c),{},{components:n})):a.createElement(h,r({ref:e},c))}));function h(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var l=n.length,r=new Array(l);r[0]=u;var i={};for(var p in e)hasOwnProperty.call(e,p)&&(i[p]=e[p]);i.originalType=t,i[m]="string"==typeof t?t:o,r[1]=i;for(var s=2;s<l;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},57650:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(87462),o=(n(67294),n(3905));const l={},r="Yolov5",i={unversionedId:"\u5f00\u53d1/\u8bed\u8a00/Python/Yolov5",id:"\u5f00\u53d1/\u8bed\u8a00/Python/Yolov5",title:"Yolov5",description:"YOLOv5\ud83d\ude80\u662f\u4e00\u4e2a\u5728COCO\u6570\u636e\u96c6\u4e0a\u9884\u8bad\u7ec3\u7684\u7269\u4f53\u68c0\u6d4b\u67b6\u6784\u548c\u6a21\u578b\u7cfb\u5217\uff0c\u5b83\u4ee3\u8868\u4e86Ultralytics\u5bf9\u672a\u6765\u89c6\u89c9AI\u65b9\u6cd5\u7684\u516c\u5f00\u7814\u7a76\uff0c",source:"@site/docs/02-\u5f00\u53d1/00-\u8bed\u8a00/Python/Yolov5.md",sourceDirName:"02-\u5f00\u53d1/00-\u8bed\u8a00/Python",slug:"/\u5f00\u53d1/\u8bed\u8a00/Python/Yolov5",permalink:"/docs/\u5f00\u53d1/\u8bed\u8a00/Python/Yolov5",draft:!1,editUrl:"https://github.com/Yue-plus/JVTC.Yue.Zone/tree/main/docs/02-\u5f00\u53d1/00-\u8bed\u8a00/Python/Yolov5.md",tags:[],version:"current",frontMatter:{},sidebar:"\u5f00\u53d1",previous:{title:"PyTorch",permalink:"/docs/\u5f00\u53d1/\u8bed\u8a00/Python/PyTorch"},next:{title:"pandas",permalink:"/docs/\u5f00\u53d1/\u8bed\u8a00/Python/pandas"}},p={},s=[{value:"\u672c\u5730\u90e8\u7f72",id:"\u672c\u5730\u90e8\u7f72",level:2},{value:"\u8fd0\u884c\u68c0\u6d4b",id:"\u8fd0\u884c\u68c0\u6d4b",level:2},{value:"\u521b\u5efa\u81ea\u5df1\u7684\u6570\u636e\u96c6",id:"\u521b\u5efa\u81ea\u5df1\u7684\u6570\u636e\u96c6",level:2},{value:"\u6570\u636e\u6807\u6ce8",id:"\u6570\u636e\u6807\u6ce8",level:3},{value:"\u4f7f\u7528 Label Studio",id:"\u4f7f\u7528-label-studio",level:4},{value:"\u4f7f\u7528 LabelImg",id:"\u4f7f\u7528-labelimg",level:4},{value:"\u4f7f\u7528 GPU \u8bad\u7ec3\u81ea\u5df1\u7684\u6570\u636e\u96c6",id:"\u4f7f\u7528-gpu-\u8bad\u7ec3\u81ea\u5df1\u7684\u6570\u636e\u96c6",level:2},{value:"\u6570\u636e\u96c6\u7ed3\u6784",id:"\u6570\u636e\u96c6\u7ed3\u6784",level:3},{value:"NVIDIA CUDA",id:"nvidia-cuda",level:3},{value:"Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.",id:"error-15-initializing-libiomp5mddll-but-found-libiomp5mddll-already-initialized",level:4},{value:"AMD ROCm",id:"amd-rocm",level:3},{value:"DirectML",id:"directml",level:4},{value:"\u9009\u62e9\u6a21\u578b",id:"\u9009\u62e9\u6a21\u578b",level:3},{value:"\u5f00\u59cb\u8bad\u7ec3",id:"\u5f00\u59cb\u8bad\u7ec3",level:3}],c={toc:s};function m(t){let{components:e,...n}=t;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"yolov5"},"Yolov5"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"YOLOv5\ud83d\ude80\u662f\u4e00\u4e2a\u5728COCO\u6570\u636e\u96c6\u4e0a\u9884\u8bad\u7ec3\u7684\u7269\u4f53\u68c0\u6d4b\u67b6\u6784\u548c\u6a21\u578b\u7cfb\u5217\uff0c\u5b83\u4ee3\u8868\u4e86Ultralytics\u5bf9\u672a\u6765\u89c6\u89c9AI\u65b9\u6cd5\u7684\u516c\u5f00\u7814\u7a76\uff0c\n\u5176\u4e2d\u5305\u542b\u4e86\u5728\u6570\u5343\u5c0f\u65f6\u7684\u7814\u7a76\u548c\u5f00\u53d1\u4e2d\u6240\u83b7\u5f97\u7684\u7ecf\u9a8c\u548c\u6700\u4f73\u5b9e\u8df5\u3002"),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/ultralytics/yolov5/blob/master/README.zh-CN.md"},"GitHub"))),(0,o.kt)("h2",{id:"\u672c\u5730\u90e8\u7f72"},"\u672c\u5730\u90e8\u7f72"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"git clone https://github.com/ultralytics/yolov5.git\ncd yolov5\nconda create --name yolov5 python=3.11\nconda activate yolov5\npip install -i http://mirrors.aliyun.com/pypi/simple/ -r ./requirements.txt --trusted-host mirrors.aliyun.com\n# pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r ./requirements.txt\n")),(0,o.kt)("h2",{id:"\u8fd0\u884c\u68c0\u6d4b"},"\u8fd0\u884c\u68c0\u6d4b"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Run YOLOv5 detection inference on images, videos, directories, globs, YouTube, webcam, streams, etc.\n\nUsage - sources:\n    $ python detect.py --weights yolov5s.pt --source 0                               # webcam\n                                                     img.jpg                         # image\n                                                     vid.mp4                         # video\n                                                     screen                          # screenshot\n                                                     path/                           # directory\n                                                     list.txt                        # list of images\n                                                     list.streams                    # list of streams\n                                                     'path/*.jpg'                    # glob\n                                                     'https://youtu.be/Zgi9g1ksQHc'  # YouTube\n                                                     'rtsp://example.com/media.mp4'  # RTSP, RTMP, HTTP stream\n\nUsage - formats:\n    $ python detect.py --weights yolov5s.pt                 # PyTorch\n                                 yolov5s.torchscript        # TorchScript\n                                 yolov5s.onnx               # ONNX Runtime or OpenCV DNN with --dnn\n                                 yolov5s_openvino_model     # OpenVINO\n                                 yolov5s.engine             # TensorRT\n                                 yolov5s.mlmodel            # CoreML (macOS-only)\n                                 yolov5s_saved_model        # TensorFlow SavedModel\n                                 yolov5s.pb                 # TensorFlow GraphDef\n                                 yolov5s.tflite             # TensorFlow Lite\n                                 yolov5s_edgetpu.tflite     # TensorFlow Edge TPU\n                                 yolov5s_paddle_model       # PaddlePaddle\n\n")),(0,o.kt)("h2",{id:"\u521b\u5efa\u81ea\u5df1\u7684\u6570\u636e\u96c6"},"\u521b\u5efa\u81ea\u5df1\u7684\u6570\u636e\u96c6"),(0,o.kt)("p",null,"\u53c2\u8003\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://docs.ultralytics.com/yolov5/tutorials/train_custom_data"},"Train Custom Data - Ultralytics YOLOv8 Docs"),"\n| ",(0,o.kt)("a",{parentName:"p",href:"https://docs.ultralytics.com/yolov5/tutorials/tips_for_best_training_results/"},"Tips for Best Training Results - Ultralytics YOLOv8 Docs")),(0,o.kt)("h3",{id:"\u6570\u636e\u6807\u6ce8"},"\u6570\u636e\u6807\u6ce8"),(0,o.kt)("h4",{id:"\u4f7f\u7528-label-studio"},"\u4f7f\u7528 Label Studio"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://labelstud.io/"},"LabelStudio")),(0,o.kt)("p",null,"\u901a\u8fc7 Anaconda \u5b89\u88c5\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"conda create --name label-studio python=3.10\nconda activate label-studio\npip install label-studio\nlabel-studio start\n")),(0,o.kt)("p",null,"\u7136\u540e\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080/"},"http://localhost:8080/")),(0,o.kt)("h4",{id:"\u4f7f\u7528-labelimg"},"\u4f7f\u7528 LabelImg"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/HumanSignal/labelImg"},"LabelImg")),(0,o.kt)("h2",{id:"\u4f7f\u7528-gpu-\u8bad\u7ec3\u81ea\u5df1\u7684\u6570\u636e\u96c6"},"\u4f7f\u7528 GPU \u8bad\u7ec3\u81ea\u5df1\u7684\u6570\u636e\u96c6"),(0,o.kt)("h3",{id:"\u6570\u636e\u96c6\u7ed3\u6784"},"\u6570\u636e\u96c6\u7ed3\u6784"),(0,o.kt)("p",null,"\u53c2\u8003 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ultralytics/yolov5/blob/master/data/coco.yaml"},(0,o.kt)("inlineCode",{parentName:"a"},"coco.yaml"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-txt",metastring:'title="\u76ee\u5f55\u7ed3\u6784"',title:'"\u76ee\u5f55\u7ed3\u6784"'}," \u251c\u2500\u2500 yolov5\n \u2514\u2500\u2500 datasets\n     \u2514\u2500\u2500 my-datasets\n         \u251c\u2500\u2500 images              # \u56fe\u7247\n         |   \u251c\u2500\u2500 01.jpg\n         |   \u251c\u2500\u2500 02.jpg\n         |   \u251c\u2500\u2500 03.jpg\n         |   \u2514\u2500\u2500 ...\n         \u251c\u2500\u2500 labels              # \u6807\u7b7e\n         |   \u251c\u2500\u2500 classes.txt     # \u6807\u7b7e\u5217\u8868\n         |   \u251c\u2500\u2500 01.txt\n         |   \u251c\u2500\u2500 02.txt\n         |   \u251c\u2500\u2500 03.txt\n         |   \u2514\u2500\u2500 ...\n         \u2514\u2500\u2500 my-datasets.yaml    # \u8bad\u7ec3\u914d\u7f6e\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="my-datasets.yaml"',title:'"my-datasets.yaml"'},"# \u6570\u636e\u96c6\u6839\u76ee\u5f55\npath: ../datasets/my_datasets\n\n# \u8bad\u7ec3\u6570\u636e\u96c6\u76ee\u5f55\ntrain: # txt \u6587\u4ef6\u6216\u76f8\u5bf9 path \u7684\u76ee\u5f55\n\n# \u9a8c\u8bc1\u6570\u636e\u96c6\u76ee\u5f55\nval: # txt \u6587\u4ef6\u6216\u76f8\u5bf9 path \u7684\u76ee\u5f55\n\n# \u6d4b\u8bd5\u6570\u636e\u96c6\u76ee\u5f55\ntest: # txt \u6587\u4ef6\u6216\u76f8\u5bf9 path \u7684\u76ee\u5f55\n\nnc: # \u6807\u7b7e\u603b\u6570\nnames: # \u6807\u7b7e\u6570\u7ec4\n")),(0,o.kt)("h3",{id:"nvidia-cuda"},"NVIDIA CUDA"),(0,o.kt)("p",null,"\u9996\u5148\u786e\u4fdd\u81ea\u5df1\u6709\u4e00\u5757\u652f\u6301 CUDA \u7684 GPU\u3002\n",(0,o.kt)("a",{parentName:"p",href:"https://developer.nvidia.com/cuda-gpus"},"\u67e5\u770b\u81ea\u5df1\u7684 GPU \u662f\u5426\u652f\u6301 CUDA"),"\u3002"),(0,o.kt)("p",null,"\u4e0b\u8f7d\u5b89\u88c5 ",(0,o.kt)("a",{parentName:"p",href:"https://developer.nvidia.com/cuda-downloads"},"CUDA toolkit"),"\u3002\n\u5b89\u88c5\u5b8c\u6210\u540e\u53ef\u80fd\u9700\u8981\u914d\u7f6e ",(0,o.kt)("inlineCode",{parentName:"p"},"Path")," \u73af\u5883\u53d8\u91cf\uff08\u770b\u770b\u81ea\u5df1\u7684\u5b89\u88c5\u4f4d\u7f6e\uff09\uff1a",(0,o.kt)("inlineCode",{parentName:"p"},"C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v12.1\\bin"),"\u3002"),(0,o.kt)("p",null,"\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"nvcc -V")," \u67e5\u770b CUDA \u7248\u672c\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text",metastring:"{1}","{1}":!0},"$ nvcc.exe -V\nnvcc: NVIDIA (R) Cuda compiler driver\nCopyright (c) 2005-2023 NVIDIA Corporation\nBuilt on Mon_Apr__3_17:36:15_Pacific_Daylight_Time_2023\nCuda compilation tools, release 12.1, V12.1.105\nBuild cuda_12.1.r12.1/compiler.32688072_0\n")),(0,o.kt)("p",null,"\u67e5\u770b\u81ea\u5df1\u5b89\u88c5\u7684 torch\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ps",metastring:"{1}","{1}":!0},"(yolov5) PS D:\\yolo\\v5> conda list | findstr torch\ntorch                     2.0.1                    pypi_0    pypi\ntorchvision               0.15.2                   pypi_0    pypi\n")),(0,o.kt)("p",null,"\u6309\u7167 ",(0,o.kt)("a",{parentName:"p",href:"#%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2"},"\u672c\u5730\u90e8\u7f72")," \u5b89\u88c5\u7684\u662f\u4f7f\u7528 CPU \u8ba1\u7b97\u7684 torch\uff0c\u73b0\u5728\u9700\u8981\u5378\u8f7d\u5b83\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"pip uninstall torch\n")),(0,o.kt)("p",null,"\u53c2\u8003 ",(0,o.kt)("a",{parentName:"p",href:"https://pytorch.org/get-started/locally/"},"PyTorch \u5b98\u7f51")," \u4e0b\u8f7d\u5b89\u88c5\u4f7f\u7528 CUDA \u8ba1\u7b97\u7684 torch\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ps"},"# \u6587\u4ef6\u5f88\u5927\uff0c\u4f60\u5fcd\u4e00\u4e0b\uff082.49G\uff09\nconda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia\n\n# \u4e5f\u53ef\u4ee5\u4f7f\u7528 pip \u5b89\u88c5\uff082.6G\uff09\npip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121\n\n# \u4e0d\u77e5\u9053\u4e3a\u5565\u5c11\u4e2a\u5305\u2193\npip install chardet\n\n# \u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u63d0\u793a\u9700\u8981\u7684\u5305\uff08\u4f46\u4e0d\u88c5\u4e5f\u80fd\u8dd1\uff09\u2193\n# pip install clearml comet_ml\n")),(0,o.kt)("h4",{id:"error-15-initializing-libiomp5mddll-but-found-libiomp5mddll-already-initialized"},"Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"OMP: Error #15: Initializing libiomp5md.dll, but found libiomp5md.dll already initialized.\nOMP: Hint This means that multiple copies of the OpenMP runtime have been linked into the program. That is dangerous, since it can degrade performance or cause incorrect results. The best thing to do is to ensure that only a single OpenMP runtime is linked into the process, e.g. by avoiding static linking of the OpenMP runtime in any library. As an unsafe, unsupported, undocumented workaround you can set the environment variable KMP_DUPLICATE_LIB_OK=TRUE to allow the program to continue to execute, but that may cause crashes or silently produce incorrect results. For more information, please see http://www.intel.com/software/products/support/.\n")),(0,o.kt)("p",null,"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff1a"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"KMP_DUPLICATE_LIB_OK")," : ",(0,o.kt)("inlineCode",{parentName:"p"},"TRUE")),(0,o.kt)("h3",{id:"amd-rocm"},"AMD ROCm"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.amd.com/zh-hans/graphics/servers-solutions-rocm-ml"},"\u5b98\u65b9\u7f51\u7ad9"),"\n| ",(0,o.kt)("a",{parentName:"p",href:"https://rocm.docs.amd.com/en/latest/"},"\u5b98\u65b9\u6587\u6863"),"\n| ",(0,o.kt)("a",{parentName:"p",href:"https://rocm.docs.amd.com/en/latest/release/gpu_os_support.html"},"GPU \u4e0e\u7cfb\u7edf\u517c\u5bb9\u6027\uff08Linux\uff09"),"\n| ",(0,o.kt)("a",{parentName:"p",href:"https://rocm.docs.amd.com/en/latest/release/windows_support.html"},"GPU \u4e0e\u7cfb\u7edf\u652f\u6301\uff08Windows\uff09"),"\n| ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/RadeonOpenCompute/ROCm"},"GitHub")),(0,o.kt)("p",null,"\u7efc\u4e0a\u6240\u8ff0\u76ee\u524d PyTorch 2.x \u5e76\u4e0d\u652f\u6301\u5728 Windows \u4e0a\u4f7f\u7528 ROCm\u3002"),(0,o.kt)("h4",{id:"directml"},"DirectML"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Torch-directml \u8f6f\u4ef6\u5305\u4ec5\u652f\u6301 PyTorch 1.13\u3002")),(0,o.kt)("p",null,"\u53c2\u8003\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/windows/ai/directml/gpu-pytorch-windows"},"\u5728 Windows \u4e0a\u4f7f\u7528 DirectML \u542f\u7528 PyTorch"),"\n| ",(0,o.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/zh-cn/windows/ai/directml/gpu-pytorch-wsl"},"\u5728 WSL 2 \u4e0a\u901a\u8fc7 DirectML \u542f\u7528 PyTorch")),(0,o.kt)("h3",{id:"\u9009\u62e9\u6a21\u578b"},"\u9009\u62e9\u6a21\u578b"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://github.com/ultralytics/yolov5/releases/download/v1.0/model_comparison.png",alt:null})),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/ultralytics/yolov5#pretrained-checkpoints"},"\u5404\u79cd\u6a21\u578b\u8be6\u7ec6\u5bf9\u6bd4"))),(0,o.kt)("h3",{id:"\u5f00\u59cb\u8bad\u7ec3"},"\u5f00\u59cb\u8bad\u7ec3"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ps"},"python train.py --data coco.yaml --epochs 300 --weights '' --cfg yolov5n.yaml  --batch-size 128\n                                                                 yolov5s                    64\n                                                                 yolov5m                    40\n                                                                 yolov5l                    24\n                                                                 yolov5x                    16\n")))}m.isMDXComponent=!0}}]);